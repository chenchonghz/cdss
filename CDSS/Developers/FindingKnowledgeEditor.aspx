<%@ Page Title="编辑症候知识库" Language="C#" MasterPageFile="~/Developer.master" AutoEventWireup="true" CodeBehind="FindingKnowledgeEditor.aspx.cs" Inherits="CDSS.FindingsKnowledgeEditor" %>
<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolderDeveloper" runat="server">
    <table style="width: 100%;">
        <tr>
            <td style="font-weight: bold; color: #0000FF; background-color: #CCCCCC; width: 401px;">症候类型及名称列表</td>
            <td rowspan="6">&nbsp;</td>
            <td style="font-weight: bold; color: #0000FF; background-color: #CCCCCC; width: 422px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 修改XML结构与数据</td>
        </tr>
        <tr>
            <td style="text-align: left; vertical-align: top; width: 401px;">
                <asp:ListBox ID="ListBoxFindingType" runat="server" DataSourceID="SqlDataSourceFindingType" DataTextField="FindingType" DataValueField="FindingType" Height="87px" Width="314px" OnSelectedIndexChanged="ListBoxFindingType_SelectedIndexChanged" AutoPostBack="True"></asp:ListBox>

            </td>
            <td style="text-align: left; vertical-align: top; width: 422px;" rowspan="2">
                <asp:Panel ID="Panel1" runat="server" Height="430px" ScrollBars="Auto" Direction="LeftToRight" HorizontalAlign="Left" Width="434px">
                    <asp:TreeView Style="line-height: 50%" ID="TreeViewFinding" runat="server" AutoGenerateDataBindings="False" Font-Size="Small" LineImagesFolder="~/TreeLineImages" OnSelectedNodeChanged="TreeViewFinding_SelectedNodeChanged" ShowLines="True">
                        <SelectedNodeStyle BackColor="Yellow" ForeColor="Red" />
                    </asp:TreeView>
                </asp:Panel>
            </td>
        </tr>
        <tr>
            <td style="text-align: left; vertical-align: top; height: 263px; width: 401px;">
                <asp:Panel ID="Panel2" runat="server" Height="338px">
                    <asp:GridView ID="GridViewFindingList" runat="server" AllowPaging="True" AutoGenerateColumns="False" AutoGenerateSelectButton="True" BackColor="White" BorderColor="#999999" BorderStyle="Solid" BorderWidth="1px" CellPadding="3" GridLines="Vertical" OnSelectedIndexChanged="GridViewFindingList_SelectedIndexChanged" PageSize="15" Width="322px" ForeColor="Black" OnPageIndexChanging="GridViewFindingList_PageIndexChanging">
                        <AlternatingRowStyle BackColor="#CCCCCC" />
                        <Columns>
                            <asp:BoundField DataField="ChineseName" HeaderText="中文名称" SortExpression="ChineseName" />
                            <asp:BoundField DataField="CreatorName" HeaderText="创建者" SortExpression="CreatorName" />
                        </Columns>
                        <FooterStyle BackColor="#CCCCCC" />
                        <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
                        <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
                        <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
                        <SortedAscendingCellStyle BackColor="#F1F1F1" />
                        <SortedAscendingHeaderStyle BackColor="#808080" />
                        <SortedDescendingCellStyle BackColor="#CAC9C9" />
                        <SortedDescendingHeaderStyle BackColor="#383838" />
                    </asp:GridView>
                </asp:Panel>
            </td>
        </tr>
        <tr>
            <td style="text-align: left; width: 401px; height: 9px;">
                <asp:RadioButtonList ID="RadioButtonListFindingType" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow" AutoPostBack="True" OnSelectedIndexChanged="RadioButtonListFindingType_SelectedIndexChanged">
                    <asp:ListItem>尚无文档 </asp:ListItem>
                    <asp:ListItem Selected="True">尚未提交 </asp:ListItem>
                    <asp:ListItem>全部文档 </asp:ListItem>
                </asp:RadioButtonList>
                &nbsp;
                    <asp:CheckBox ID="CheckBoxListYourself" runat="server" AutoPostBack="True" Font-Bold="True" ForeColor="Blue" OnCheckedChanged="CheckBoxListYourself_CheckedChanged" Text="当前用户" />
                <br />
            </td>
            <td style="text-align: left; vertical-align: middle; width: 422px; height: 9px;">属性名称<asp:TextBox ID="XmlProperty" runat="server" Width="140px"></asp:TextBox>
                &nbsp;属性值&nbsp;&nbsp;
                    <asp:TextBox ID="XmlText" runat="server" Width="141px"></asp:TextBox>
                <br />
            </td>
        </tr>
        <tr>
            <td style="text-align: left; width: 401px;">
                <asp:Literal ID="Literal2" runat="server" Text="选择文档："></asp:Literal>
                <asp:FileUpload ID="FileUploadFindingFile" runat="server" />
            </td>
            <td style="text-align: center; vertical-align: middle; width: 422px;">
                <asp:Button ID="XmlSave" runat="server" OnClick="XmlSave_Click" Text="修改" Width="100px" />
                <asp:Button ID="DeleteNode" runat="server" OnClick="DeleteNode_Click" Text="删除" Width="100px" />
                <asp:Button ID="AddProperty" runat="server" OnClick="AddProperty_Click" Text="增加Property" Width="100px" />
                <asp:Button ID="AddOption" runat="server" OnClick="AddOption_Click" Text="增加Option" Width="100px" />
            </td>
        </tr>
        <tr>
            <td style="text-align: left; vertical-align: top; width: 401px;">
                <asp:Button ID="ButtonUploadFindingFile" runat="server" OnClick="ButtonUploadFindingFile_Click" Text="完成上载并保存到数据库" Width="365px" />
            </td>
            <td style="text-align: left; vertical-align: top; width: 422px;">
                <asp:Button ID="ButtonTempSave" runat="server" Text="保存数据修改" Width="204px" OnClick="ButtonTempSave_Click" />
                <asp:Button ID="ButtonCompleteCreate" runat="server" Text="保存并提交审核" Width="202px" OnClick="ButtonCompleteCreate_Click" />
            </td>
        </tr>
        <tr>
            <td colspan="3">&nbsp;&nbsp;&nbsp; 
                    <asp:SqlDataSource ID="SqlDataSourceFindingList" runat="server" ConnectionString="<%$ ConnectionStrings:CDSSConnectionString %>" SelectCommand="SELECT [ChineseName],[CreatorName] FROM [FindingsBase] WHERE ([FindingType] = @FindingType) Order by ChineseName">
                        <SelectParameters>
                            <asp:ControlParameter ControlID="ListBoxFindingType" Name="FindingType" PropertyName="SelectedValue" Type="String" />
                        </SelectParameters>
                    </asp:SqlDataSource>
                <asp:SqlDataSource ID="SqlDataSourceFindingType" runat="server" ConnectionString="<%$ ConnectionStrings:CDSSConnectionString %>" SelectCommand="SELECT DISTINCT [FindingType] FROM [FindingsBase]"></asp:SqlDataSource>
                <br />
                <asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/XMLfiles/咳痰-李传富.xml"></asp:XmlDataSource>
            </td>
        </tr>
    </table>
</asp:Content>
